#导入包和数据
library(pacman)
p_load(tokenizers,tidyverse,tidytext,jiebaR,readtext,tidyfst,knitr,kableExtra,treemapify,ggplot2,ggwordcloud)

#本次分析的数据来源于2021年11月14日猎聘网站中搜索关键词“数据分析”和“前端开发”中所显示的所有职位信息，其中包括“职位”、“工作地址”、“公司全称”、“薪水”、“员工数”、“学历”、“工作经验”、“行业标签”、“职位详情”。这里只关注“职位详情”中的**职位要求**和**职位描述**两块内容，首先来看一下职位详情中都有哪些内容。

mydataframe <- read.csv("occupation.csv",header=TRUE,encoding = "UTF-8")
names(mydataframe) <- c("post","position","company","salary","workers_num","edu","work_experience","work_label","recruitment_info")
mytext <- mydataframe$recruitment_info
head(mytext,2)

#接下来的任务是提取其中的“职位要求”和“职位描述”两部分内容，这可以通过正则表达式提取得出。麻烦的是不同招聘信息中对“职位要求”或“职位描述”的中文表示不同。通过快速浏览文本信息发现与“职位要求”匹配的关键词有：任职要求、岗位要求、职位要求、任职资格；与“职位描述”匹配的关键词有：岗位职责、职责描述、工作职责、职位描述、工作内容、岗位描述、职位职责。另外上述关键词的周围的标点符号也有不一样的表示，一共有三种：“:”、“：”，“【】”。所以要用上述所有情况的所有组合情况构建正则表达式。


# 数据描述及文本预处理
本次分析的数据来源于2021年11月14日猎聘网站中搜索关键词“数据分析”和“前端开发”中所显示的所有职位信息，其中包括“职位”、“工作地址”、“公司全称”、“薪水”、“员工数”、“学历”、“工作经验”、“行业标签”、“职位详情”。本报告关注“职位详情”中的**职位要求**和**职位描述**两块内容。**职位要求**内容主要是公司发布的对招聘对象的学历、工作经验、工作技能、个人性格等要求；**职位描述**内容主要是职位对应的主要工作内容如搭建数据系统、进行数据分析、负责产品功能的设计与开发。
本文文本数据分析的第一步是将“职位详情”中的**职位要求**和**职位描述**两部分分开。在初始数据框中，归纳得出两部分的关键词标志如下表。
kable(data.frame("职位要求"=c("任职要求","岗位要求","职位要求","任职资格"),"职位描述"=c("岗位职责","职责描述","工作职责","职位描述")))
